# Wildfire Prediction Backend

Backend API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ª–µ—Å–Ω—ã—Ö –ø–æ–∂–∞—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ML –º–æ–¥–µ–ª–µ–π –∏ –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö ERA5.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üî• **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∂–∞—Ä–æ–≤** - ML –º–æ–¥–µ–ª—å –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–∞ –ø–æ–∂–∞—Ä–æ–≤
- üå§Ô∏è **ERA5 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- üìä **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ** - –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ–≥–æ–¥—ã –∑–∞ 7 –¥–Ω–µ–π
- üóÑÔ∏è **PostgreSQL** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <repository-url>
cd wildfire-backend
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://wildfire_user:password@localhost:5432/wildfire

# ERA5 API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
ERA5_API_KEY=your_era5_api_key_here
ERA5_API_URL=https://cds.climate.copernicus.eu/api/v2

# JWT —Å–µ–∫—Ä–µ—Ç—ã
JWT_SECRET_KEY=your_jwt_secret_key
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# –î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DEBUG=True
LOG_LEVEL=INFO
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ERA5 API

#### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [CDS (Climate Data Store)](https://cds.climate.copernicus.eu/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "API"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à API –∫–ª—é—á
4. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ERA5_API_KEY`

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .cdsapirc
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `~/.cdsapirc`:
```ini
url: https://cds.climate.copernicus.eu/api/v2
key: your_era5_api_key_here
```

### 6. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
alembic upgrade head
```

### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## API Endpoints

### –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∂–∞—Ä–æ–≤

#### –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
```http
POST /api/v1/predictions
Content-Type: application/json

{
  "latitude": 55.7558,
  "longitude": 37.6176,
  "description": "–ú–æ—Å–∫–≤–∞, —Ü–µ–Ω—Ç—Ä"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
```http
GET /api/v1/predictions/status/{prediction_id}
```

#### –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
```http
GET /api/v1/predictions/history?limit=50&offset=0
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
```http
GET /api/v1/predictions/stats
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–≥–æ–¥–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è ML –º–æ–¥–µ–ª–∏:

- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ**: latitude, longitude
- **–¢–µ–∫—É—â–∏–µ**: temperature, humidity, wind_speed, precipitation
- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ (7 –¥–Ω–µ–π)**: avg_temperature, avg_humidity, avg_wind_speed, total_precipitation
- **–¢—Ä–µ–Ω–¥—ã**: temperature_trend, humidity_trend

### –£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–∞
- **low** (0-25%): –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫
- **medium** (25-50%): –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫
- **high** (50-75%): –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
- **critical** (75-100%): –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫

## ML –ú–æ–¥–µ–ª—å

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
- **–ê–ª–≥–æ—Ä–∏—Ç–º**: Random Forest / Gradient Boosting
- **–ü—Ä–∏–∑–Ω–∞–∫–∏**: 12 –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–û–±—É—á–µ–Ω–∏–µ**: –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–∂–∞—Ä–æ–≤ 2020-2021
- **–í–µ—Ä—Å–∏—è**: 1.0.0

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
# –û–±—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏
python scripts/train_model.py

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
python scripts/deploy_model.py
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
- **–£—Ä–æ–≤–µ–Ω—å**: INFO
- **–§–æ—Ä–º–∞—Ç**: JSON
- **–†–æ—Ç–∞—Ü–∏—è**: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- –¢–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ERA5 API

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
wildfire-backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ core/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ models/         # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ routers/        # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ schemas/        # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ main.py         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ alembic/            # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
pytest tests/
```

### –õ–∏–Ω—Ç–∏–Ω–≥
```bash
flake8 app/
black app/
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 